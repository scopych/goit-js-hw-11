{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\nconst searchParams = new URLSearchParams({\n  key: '54497061-8a3f1039e79f08659d000d130',\n  image_type: \"photo\",\n  lang: 'en',\n  orientation: 'horizontal',\n  safesearch: true,\n});\n\nexport function getImagesByQuery(query) {\n\treturn axios.get(`/?${searchParams}&q=${query}`);\n}\n","// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nvar lightbox = new SimpleLightbox('.gallery a', { /* options */ });\n\nexport function createGallery (images) {\n\tconst listItems = images.map(obj => `\n\t<li>\n\t\t<a href=\"${obj.largeImageURL}\">\n\t\t\t<img src=\"${obj.webformatURL}\" alt=\"${obj.tags}\">\n\t\t</a>\n\t\t<div class=\"captions\">\n\t\t\t<p><strong>Likes:</strong> ${obj.likes}</p>\n\t\t\t<p><strong>views:</strong> ${obj.views}</p>\n\t\t\t<p><strong>Comments:</strong> ${obj.comments}</p>\n\t\t\t<p><strong>Downloads:</strong> ${obj.downloads}</p>\n\t\t</div>\n\t</li>`).join('');\n\t\n\tdocument.querySelector('.gallery').innerHTML = listItems;\n\tlightbox.refresh();\n\treturn 0;\n}\n\nexport function clearGallery () {\n\tdocument.querySelector('.gallery').innerHTML = '';\n}\n\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery }    from './js/render-functions.js';\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nform.addEventListener(\"submit\", handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  const loader = document.querySelector(\".loader\");\n  const form = event.target;\n  const search_text = form.elements[\"search-text\"].value;\n  \n  if (search_text.trim() === \"\") {\n    return;\n  } else {\n  \tclearGallery();\n\t// This removes the \"hidden\" class, making the loader visible again\n\tloader.classList.remove(\"hidden\");\n\n  \tgetImagesByQuery(search_text)\n\t\t.then(resp => {\n\t\t\tif (resp.data.hits.length === 0) {\n\t\t\t\tiziToast.error({\n\t\t\t\t    title: '',\n\t\t\t\t    position: 'topRight',\n\t\t\t\t    message: 'Sorry, there are no images matching your search query. Please try again!',\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcreateGallery(resp.data.hits);\n\t\t\t\t// 3. Create a list of promises (one for each image)\n\t\t\t      const imagePromises = resp.data.hits.map(obj => waitForImage(obj.webformatURL));\n\t\t\t\n\t\t\t      // 4. Return this promise so the chain stays open\n\t\t\t      return Promise.all(imagePromises);\n\t\t\t}\n\n\t\t})\n\t\t.finally( () => {\n\t\t\t// This adds the \"hidden\" class, making the loader visible again\n\t\t\tloader.classList.add(\"hidden\");\n\t\t});\n  }\n}\n\nfunction waitForImage(imgElement) {\n  return new Promise((resolve, reject) => {\n    if (imgElement.complete) {\n      resolve(); // Image was already cached/loaded\n    } else {\n      imgElement.onload = resolve;\n      imgElement.onerror = reject;\n    }\n  });\n}\n\n\n\n"],"names":["axios","searchParams","getImagesByQuery","query","lightbox","SimpleLightbox","createGallery","images","listItems","obj","clearGallery","form","handleSubmit","event","loader","search_text","resp","iziToast","imagePromises","waitForImage","imgElement","resolve","reject"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,0BACzB,MAAMC,EAAe,IAAI,gBAAgB,CACvC,IAAK,qCACL,WAAY,QACZ,KAAM,KACN,YAAa,aACb,WAAY,EACd,CAAC,EAEM,SAASC,EAAiBC,EAAO,CACvC,OAAOH,EAAM,IAAI,KAAKC,CAAY,MAAME,CAAK,EAAE,CAChD,CCRA,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAAiB,CAAA,EAE1D,SAASC,EAAeC,EAAQ,CACtC,MAAMC,EAAYD,EAAO,IAAIE,GAAO;AAAA;AAAA,aAExBA,EAAI,aAAa;AAAA,eACfA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA;AAAA,gCAGjBA,EAAI,KAAK;AAAA,gCACTA,EAAI,KAAK;AAAA,mCACNA,EAAI,QAAQ;AAAA,oCACXA,EAAI,SAAS;AAAA;AAAA,OAE1C,EAAE,KAAK,EAAE,EAEf,gBAAS,cAAc,UAAU,EAAE,UAAYD,EAC/CJ,EAAS,QAAO,EACT,CACR,CAEO,SAASM,GAAgB,CAC/B,SAAS,cAAc,UAAU,EAAE,UAAY,EAChD,CCrBA,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,iBAAiB,SAAUC,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpB,MAAMC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EADOF,EAAM,OACM,SAAS,aAAa,EAAE,MAE7CE,EAAY,KAAM,IAAK,KAG1BL,IAEFI,EAAO,UAAU,OAAO,QAAQ,EAE9BZ,EAAiBa,CAAW,EAC5B,KAAKC,GAAQ,CACb,GAAIA,EAAK,KAAK,KAAK,SAAW,EAC7BC,EAAS,MAAM,CACX,MAAO,GACP,SAAU,WACV,QAAS,0EACjB,CAAK,MACK,CACNX,EAAcU,EAAK,KAAK,IAAI,EAEvB,MAAME,EAAgBF,EAAK,KAAK,KAAK,IAAIP,GAAOU,EAAaV,EAAI,YAAY,CAAC,EAG9E,OAAO,QAAQ,IAAIS,CAAa,CACrC,CAEJ,CAAG,EACA,QAAS,IAAM,CAEfJ,EAAO,UAAU,IAAI,QAAQ,CAChC,CAAG,EAEH,CAEA,SAASK,EAAaC,EAAY,CAChC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CAClCF,EAAW,SACbC,KAEAD,EAAW,OAASC,EACpBD,EAAW,QAAUE,EAE3B,CAAG,CACH"}